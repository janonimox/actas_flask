<!doctype html>
<html><head><meta charset="utf-8"><title>Períodos remunerativos</title></head>
<body>
  <h2>Períodos remunerativos</h2>

  <form method="post" action="{{ url_for('main.periodos_nuevo') }}">
    <fieldset>
      <legend>Nuevo período</legend>
      <label>Año: <input type="number" name="anio" min="2000" max="2100" required></label>
      <label>Mes: <input type="number" name="mes" min="1" max="12" required></label>
      <label>Fecha inicio: <input type="date" name="fecha_inicio" required></label>
      <label>Fecha corte: <input type="date" name="fecha_corte" required></label>
      <button type="submit">Crear</button>
    </fieldset>
  </form>

  <hr>
  <table border="1" cellpadding="6">
    <thead><tr><th>Período</th><th>Inicio</th><th>Corte</th><th>Estado</th><th>Acción</th></tr></thead>
    <tbody>
      {% for p in periodos %}
      <tr>
        <td>{{ "%02d"|format(p.mes) }}/{{ p.anio }} ({{ p.etiqueta_legible }})</td>
        <td>{{ p.fecha_inicio }}</td>
        <td>{{ p.fecha_corte }}</td>
        <td>{{ p.estado }}</td>
        <td>
          <form method="post" action="{{ url_for('main.periodos_estado', pid=p.id) }}">
            <select name="estado">
              <option value="abierto"  {{ 'selected' if p.estado=='abierto' else '' }}>Abrir</option>
              <option value="cerrado"  {{ 'selected' if p.estado=='cerrado' else '' }}>Cerrar</option>
            </select>
            <button type="submit">Actualizar</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="5">Sin períodos.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <p><a href="{{ url_for('main.listar_actas') }}">Volver</a></p>
</body></html>
